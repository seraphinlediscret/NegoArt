YUI.add("hermes-template-search-min-size-picker",function(e,a){var l=e.Template.Handlebars.revive({1:function(e,a,l,n,s){var t,i=null!=a?a:{},r=l.helperMissing,u=e.escapeExpression;return'\t\t<li class="size-button'+(null!=(t=l.if.call(i,null!=a?a.isFirst:a,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?t:"")+(null!=(t=l.if.call(i,null!=a?a.isLast:a,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?t:"")+(null!=(t=l.if.call(i,null!=a?a.selected:a,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?t:"")+' tabbable"'+(null!=(t=l.if.call(i,null!=a?a.value:a,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?t:"")+' data-tooltip-title="'+u((l.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.titleIntlKey:a},data:s}))+(null!=(t=l.if.call(i,null!=a?a.value:a,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?t:"")+'" data-tooltip-prefer-bottom="true" tabindex="0" aria-label="'+u((l.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.titleIntlKey:a},data:s}))+(null!=(t=l.if.call(i,null!=a?a.value:a,{name:"if",hash:{},fn:e.program(10,s,0),inverse:e.noop,data:s}))?t:"")+'"><span aria-hidden="true">'+u((l.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.intlKey:a},data:s}))+"<span></li>\n"},2:function(e,a,l,n,s){return" first"},4:function(e,a,l,n,s){return" last"},6:function(e,a,l,n,s){return" selected"},8:function(e,a,l,n,s){var t;return' data-size-value="'+e.escapeExpression("function"==typeof(t=null!=(t=l.value||(null!=a?a.value:a))?t:l.helperMissing)?t.call(null!=a?a:{},{name:"value",hash:{},data:s}):t)+'"'},10:function(e,a,l,n,s){var t;return" ("+e.escapeExpression("function"==typeof(t=null!=(t=l.value||(null!=a?a.value:a))?t:l.helperMissing)?t.call(null!=a?a:{},{name:"value",hash:{},data:s}):t)+")"},compiler:[7,">= 4.0.0"],main:function(e,a,l,n,s){var t,i=null!=a?a:{};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((l.intlMessage||a&&a.intlMessage||l.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"search.MINIMUM_SIZE"},data:s}))+'</p>\n<ul class="size-list">\n'+(null!=(t=l.each.call(i,null!=a?a.sizes:a,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?t:"")+"</ul>\n"},useData:!0}),n={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(n[a]=l)}),e.Template.register("hermes/search-min-size-picker",function(a,s){return s=s||{},s.partials=s.partials?e.merge(n,s.partials):n,l(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-min-size-picker-view",function(e){var t=[{intlKey:"search.SMALL_SHORT",titleIntlKey:"search.SMALL_SHOW_ALL_SIZES",selected:!0},{intlKey:"search.MEDIUM_SHORT",titleIntlKey:"search.MEDIUM",value:"640"},{intlKey:"search.LARGE_SHORT",titleIntlKey:"search.LARGE",value:"1024"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){var s,r,a,h,l=this;return this.searchUrl=i.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),s=this.searchUrl.getAPIParam(e.SearchHelper.API.dimensionSearchMode),r=this.searchUrl.getAPIParam(e.SearchHelper.API.height),a=this.searchUrl.getAPIParam(e.SearchHelper.API.width),this.sizes=[],t.forEach(function(t){h=e.merge(t),s&&r&&a&&(h.selected=t.value&&r===t.value&&a===t.value&&"min"===s),h.selected&&l.set("selectedSize",h.value),l.sizes.push(h)}),this.sizes[0].isFirst=!0,this.sizes[this.sizes.length-1].isLast=!0,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-min-size-picker",{sizes:this.sizes}),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleSizeClick.bind(this),".size-button")),this.registerEventHandler(this.get("container").delegate("key",this.handleSizeClick.bind(this),"down:13",".size-button")),this},handleSizeClick:function(t){var i=t.currentTarget.getData("size-value");t.halt(),this.get("selectedSize")!==i&&(this.set("selectedSize",i),this.get("container").one(".size-button.selected").removeClass("selected"),t.currentTarget.addClass("selected"),!this.get("selectedSize")||this.isDefaultValue()?(this.searchUrl.removeAPIParam(e.SearchHelper.API.dimensionSearchMode),this.searchUrl.removeAPIParam(e.SearchHelper.API.height),this.searchUrl.removeAPIParam(e.SearchHelper.API.width)):(this.searchUrl.setAPIParam(e.SearchHelper.API.dimensionSearchMode,"min"),this.searchUrl.setAPIParam(e.SearchHelper.API.height,this.get("selectedSize")),this.searchUrl.setAPIParam(e.SearchHelper.API.width,this.get("selectedSize"))),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl))},isDefaultValue:function(){return!this.get("selectedSize")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-min-size-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-content-picker",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s,i=null!=a?a:{},r=n.helperMissing,c=e.escapeExpression;return'\t\t<li class="content-button'+(null!=(s=n.if.call(i,null!=a?a.selected:a,{name:"if",hash:{},fn:e.program(2,t,0),inverse:e.noop,data:t}))?s:"")+' tabbable"'+(null!=(s=n.if.call(i,null!=a?a.value:a,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t}))?s:"")+' data-tooltip-title="'+c((n.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.titleIntlKey:a},data:t}))+'" data-tooltip-prefer-bottom="true" tabindex="0">'+c((n.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.intlKey:a},data:t}))+"</li>\n"},2:function(e,a,n,l,t){return" checked"},4:function(e,a,n,l,t){var s;return' data-content-value="'+e.escapeExpression("function"==typeof(s=null!=(s=n.value||(null!=a?a.value:a))?s:n.helperMissing)?s.call(null!=a?a:{},{name:"value",hash:{},data:t}):s)+'"'},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,t){var s,i=null!=a?a:{};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((n.intlMessage||a&&a.intlMessage||n.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"search.CONTENT"},data:t}))+'</p>\n<ul class="content-list">\n'+(null!=(s=n.each.call(i,null!=a?a.contents:a,{name:"each",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t}))?s:"")+"</ul>\n"},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/search-content-picker",function(a,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,n(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-content-picker-view",function(e){var t=[{intlKey:"search.PHOTOS",titleIntlKey:"search.PHOTOS",value:"photos",selected:!0},{intlKey:"search.VIDEOS",titleIntlKey:"search.VIDEOS",value:"videos",selected:!0}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(s){var n,i,a=this;return this.searchUrl=s.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),n=this.searchUrl.getAPIParam(e.SearchHelper.API.mediaType),this.selectedContents=[],this.contents=[],t.forEach(function(t){i=e.merge(t),n&&(i.selected=n===t.value||"all"===n),i.selected&&a.selectedContents.push(i.value),a.contents.push(i)}),this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-content-picker",{contents:this.contents}),this.updateContainerDisabledState(),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleContentClick.bind(this),".content-button")),this.registerEventHandler(this.get("container").delegate("key",this.handleContentClick.bind(this),"down:13",".content-button")),this},handleContentClick:function(t){var s=t.target.getData("content-value"),n=this.selectedContents.indexOf(s);if(t.halt(),-1===n)this.selectedContents.push(s),t.target.addClass("checked"),this.updateContainerDisabledState();else{if(this.isContainerDisabled())return;this.selectedContents.splice(n,1),t.target.removeClass("checked"),this.updateContainerDisabledState()}!this.selectedContents.length||this.isDefaultValue()?this.searchUrl.removeAPIParam(e.SearchHelper.API.mediaType):this.searchUrl.setAPIParam(e.SearchHelper.API.mediaType,this.selectedContents[0]),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},updateContainerDisabledState:function(){this.selectedContents.length<=1?this.get("container").addClass("disabled"):this.get("container").removeClass("disabled")},isContainerDisabled:function(){return!!this.get("container").hasClass("disabled")},isDefaultValue:function(){return this.selectedContents&&this.selectedContents.length===t.length}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-content-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-search-in-picker",function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,s){var t,i=null!=a?a:{},r=n.helperMissing,u=e.escapeExpression;return'\t\t<li class="search-in-button'+(null!=(t=n.if.call(i,null!=a?a.isFirst:a,{name:"if",hash:{},fn:e.program(2,s,0),inverse:e.noop,data:s}))?t:"")+(null!=(t=n.if.call(i,null!=a?a.isLast:a,{name:"if",hash:{},fn:e.program(4,s,0),inverse:e.noop,data:s}))?t:"")+(null!=(t=n.if.call(i,null!=a?a.selected:a,{name:"if",hash:{},fn:e.program(6,s,0),inverse:e.noop,data:s}))?t:"")+' tabbable"'+(null!=(t=n.if.call(i,null!=a?a.value:a,{name:"if",hash:{},fn:e.program(8,s,0),inverse:e.noop,data:s}))?t:"")+' data-tooltip-title="'+u((n.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.titleIntlKey:a},data:s}))+'" data-tooltip-prefer-bottom="true" tabindex="0">'+u((n.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:null!=a?a.intlKey:a},data:s}))+"</li>\n"},2:function(e,a,n,l,s){return" first"},4:function(e,a,n,l,s){return" last"},6:function(e,a,n,l,s){return" selected"},8:function(e,a,n,l,s){var t;return' data-search-in-value="'+e.escapeExpression("function"==typeof(t=null!=(t=n.value||(null!=a?a.value:a))?t:n.helperMissing)?t.call(null!=a?a:{},{name:"value",hash:{},data:s}):t)+'"'},compiler:[7,">= 4.0.0"],main:function(e,a,n,l,s){var t,i=null!=a?a:{};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((n.intlMessage||a&&a.intlMessage||n.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"search.SEARCH_IN"},data:s}))+'</p>\n<ul class="search-in-list">\n'+(null!=(t=n.each.call(i,null!=a?a.searchIns:a,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?t:"")+"</ul>\n"},useData:!0}),l={};e.Array.each([],function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)}),e.Template.register("hermes/search-search-in-picker",function(a,s){return s=s||{},s.partials=s.partials?e.merge(l,s.partials):l,n(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-search-in-picker-view",function(e){var t=[{intlKey:"search.ALL",titleIntlKey:"search.FULL_TEXT",value:"text",selected:!0},{intlKey:"search.TAGS",titleIntlKey:"search.TAGS_ONLY",value:"tags"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(s){var r,a,i=this;return this.searchUrl=s.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),r=this.searchUrl.getAPIParam(e.SearchHelper.API.tags),this.searchIns=[],t.forEach(function(t){a=e.merge(t),(r||""===r)&&(a.selected="tags"===a.value),a.selected&&i.set("selectedSearchIn",a.value),i.searchIns.push(a)}),this.searchIns[0].isFirst=!0,this.searchIns[this.searchIns.length-1].isLast=!0,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-search-in-picker",{searchIns:this.searchIns}),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleSearchInClick.bind(this),".search-in-button")),this.registerEventHandler(this.get("container").delegate("key",this.handleSearchInClick.bind(this),"down:13",".search-in-button")),this},handleSearchInClick:function(t){var s=t.target.getData("search-in-value"),r=this.searchUrl.getSearchTerm();t.halt(),this.get("selectedSearchIn")!==s&&(this.set("selectedSearchIn",s),this.get("container").one(".search-in-button.selected").removeClass("selected"),t.target.addClass("selected"),this.searchUrl.removeAPIParam(e.SearchHelper.API.text),this.searchUrl.removeAPIParam(e.SearchHelper.API.tags),!this.get("selectedSearchIn")||this.isDefaultValue()?this.searchUrl.setAPIParam(e.SearchHelper.API.text,r):this.searchUrl.setAPIParam(e.SearchHelper.API.tags,r),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl))},isDefaultValue:function(){return"text"===this.get("selectedSearchIn")}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-search-in-picker"],langBundles:["search"]});YUI.add("hermes-template-search-date-picker",function(a,e){var t=a.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(a,e,t,n,s){var l,i=null!=e?e:{},d=t.helperMissing,r=a.escapeExpression;return'<div class="dropdown-link date-mode-menu tabbable" tabindex="-1"><p class="option-header">'+r("function"==typeof(l=null!=(l=t.dateMode||(null!=e?e.dateMode:e))?l:d)?l.call(i,{name:"dateMode",hash:{},data:s}):l)+'</p><span class="dropdown-arrow" aria-haspopup="true" aria-expanded="false"></span></div>\n<div class="date-inputs">\n  <div class="date-input-container">\n    <label>'+r((t.intlMessage||e&&e.intlMessage||d).call(i,{name:"intlMessage",hash:{intlName:"search.FROM"},data:s}))+'</label>\n    <input type="text" id="date-from" class="date-picker tabbable" placeholder="'+r((t.intlMessage||e&&e.intlMessage||d).call(i,{name:"intlMessage",hash:{intlName:"pika-day.DATE_FORMAT"},data:s}))+'" tabindex="0" />\n  </div>\n  <div class="date-input-container">\n    <label>'+r((t.intlMessage||e&&e.intlMessage||d).call(i,{name:"intlMessage",hash:{intlName:"search.TO"},data:s}))+'</label>\n    <input type="text" id="date-to" class="date-picker tabbable" placeholder="'+r((t.intlMessage||e&&e.intlMessage||d).call(i,{name:"intlMessage",hash:{intlName:"pika-day.DATE_FORMAT"},data:s}))+'" tabindex="0" />\n  </div>\n</div>\n'},useData:!0}),n={};a.Array.each([],function(e){var t=a.Template.get("hermes/"+e);t&&(n[e]=t)}),a.Template.register("hermes/search-date-picker",function(e,s){return s=s||{},s.partials=s.partials?a.merge(n,s.partials):n,t(e,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});