YUI.add("hermes-template-notification",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,t,l){return" has-menu"},3:function(e,n,a,t,l){var i;return null!=(i=a.if.call(null!=n?n:{},null!=n?n.hasMenu:n,{name:"if",hash:{},fn:e.program(4,l,0),inverse:e.noop,data:l}))?i:""},4:function(e,n,a,t,l){return'\t\t<span class="notif-context-menu-caret"></span>\n'},compiler:[7,">= 4.0.0"],main:function(e,n,a,t,l){var i,r=null!=n?n:{},s=a.helperMissing;return'<div class="notification'+(null!=(i=a.if.call(r,null!=n?n.hasMenu:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+'">\n\t'+e.escapeExpression((a.outlet||n&&n.outlet||s).call(r,null!=n?n.notifTemplate:n,!1,{name:"outlet",hash:{},data:l}))+"\n\n"+(null!=(i=(a.isFlipped||n&&n.isFlipped||s).call(r,"enable-notif-caret",{name:"isFlipped",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?i:"")+"</div>"},useData:!0}),t={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(t[n]=a)}),e.Template.register("hermes/notification",function(n,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("notification-view",function(t,e){var i=require("hermes-core/flog")(e);t.flutil;t.namespace("Views")[this.name]=t.Base.create("notification-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.notifId=t.id,this.object=t.object,this.objectType=t.objectType,this.subevents=t.events,this.isMuted=t.isMuted,this.notifModel=t.notifModel,this},loadState:function(){var e=this,i=[this.appContext.getModelRegistry("photo-group-invitations-models").then(function(t){e.invitationsModelRegistry=t}),this.appContext.getModelRegistry("notification-models").then(function(t){e.notificationsModelRegistry=t})];return t.Promise.all(i)},buildContainer:function(){var t={params:{object:this.object,type:this.objectType,event:this.subevents[0],subCount:this.subevents.length-1,viewer:this.appContext.getViewer(),eventCount:this.subevents.length,events:this.subevents,hasMenu:!0},templateName:"",photoTemplateName:null};switch(t.params.type){case"photo":this.handlePhotoNotificationType(t);break;case"person":this.handlePersonNotificationType(t);break;case"group":this.handleGroupNotificationType(t);break;case"discussion":this.handleDiscussionNotificationType(t);break;case"gallery":this.handleGalleryNotificationType(t);break;case"flickrmail":this.handleFlickrMailNotificationType(t);break;case"testimonial":this.handleTestimonialNotificationType(t);break;default:return}return t.photoTemplateName&&(t.params.details=this.templates(t.photoTemplateName)(t.params),t.templateName="notification-photo-shell"),t.params.notifTemplate=this.templates(t.templateName)(t.params),this.setContainerWithTemplate("notification",t.params),this},handlePhotoNotificationType:function(t){for(var e=0;e<t.params.events.length;e++)t.params.events[e].owner.url="/photos/"+t.params.events[e].owner.pathAlias||t.params.events[e].owner.id;switch("group-invite"!==t.params.event.type&&(t.params.people=this.getEventOwners(t.params.events),t.params.peopleCount=t.params.people.length,t.params.subPeopleCount=t.params.people.length-1),t.params.event.type){case"comment":t.photoTemplateName="notification-photo-comment";break;case"fave":t.photoTemplateName="notification-photo-fave";break;case"gallery":t.templateName="notification-added-to-gallery";break;case"people":t.photoTemplateName="notification-person",t.params.object.owner.isMe||(t.params.hasMenu=!1);break;case"tag":t.photoTemplateName="notification-tag";break;case"photo_comment_mention":t.photoTemplateName="notification-mention";break;case"group_invite":t.params.groups=this.getEventGroups(t.params.events),t.params.groupsCount=t.params.groups.length,t.params.subGroupsCount=t.params.groups.length-1,t.templateName="notification-photo-group-invite";break;case"note":t.photoTemplateName="notification-photo-note";break;case"share":t.photoTemplateName="notification-photo-share",t.params.hasMenu=!1;break;default:return}},handlePersonNotificationType:function(t){if(t.params.event)switch(t.params.event.type){case"contacted":t.params.event.owner.url="/photos/"+t.params.event.owner.pathAlias||t.params.event.owner.id,t.templateName="notification-person-follow";break;case"friend_join":t.templateName="notification-friend-join";break;default:return}t.params.hasMenu=!1},handleGroupNotificationType:function(t){t.params.event&&"group_user_invite"===t.params.event.type&&(t.templateName="notification-group-invite",t.params.hasMenu=!1)},handleDiscussionNotificationType:function(t){if(t.params.event)switch(t.params.event.type){case"group_topic_new":t.templateName="notification-group-topic-new",t.params.hasMenu=!1;break;case"topic_reply":case"reply_reply":t.params.people=this.getEventOwners(t.params.events),t.params.peopleCount=t.params.people.length,t.params.subPeopleCount=t.params.people.length-1,t.params.replyUrl=t.params.object.url+"/"+t.params.event.replyId,t.templateName="notification-group-discussion-reply";break;default:return}},handleGalleryNotificationType:function(t){t.params.event&&"comment"===t.params.event.type&&(t.params.people=this.getEventOwners(t.params.events),t.params.peopleCount=t.params.people.length,t.params.subPeopleCount=t.params.people.length-1,t.templateName="notification-gallery-comment")},handleFlickrMailNotificationType:function(t){t.params.event&&"flickrmail"===t.params.event.type&&(t.templateName="notification-flickrmail"),t.params.hasMenu=!1},handleTestimonialNotificationType:function(t){t.params.event&&"testimonial"===t.params.event.type&&(t.templateName="notification-testimonial"),t.params.hasMenu=!1},activate:function(){var t=this.subevents[0],e={type:this.objectType,id:this.object.id,eventType:t.type,latestTimestamp:t.timestamp,isMuted:this.isMuted},i=this.get("container");return this.notificationsList=i.ancestor(".notifications-list"),this.listItem=i.ancestor("li.notification-list-item"),this.ctxMenuArrow=i.one(".notif-context-menu-caret"),this.notification=this.listItem.one(".notification"),this.ctxMenuArrow&&this.registerEventHandler(this.ctxMenuArrow.on("click",this.handleContextArrowClick.bind(this))),this.ctxMenu||(i.appendChild(this.templates("notification-context-menu")({})),this.ctxMenu=i.one(".notification-context-menu")),this.turnOffOption=this.ctxMenu.one(".turn-off-object-option"),this.turnOnOption=this.ctxMenu.one(".turn-on-object-option"),this.turnOffOption&&this.registerEventHandler(this.turnOffOption.on("click",this.handleMuteObjectClick.bind(this,e,!0))),this.turnOnOption&&this.registerEventHandler(this.turnOnOption.on("click",this.handleMuteObjectClick.bind(this,e,!1))),e.isMuted?(this.turnOffOption.addClass("hidden"),this.turnOnOption.removeClass("hidden"),this.notification.addClass("muted")):(this.turnOnOption.addClass("hidden"),this.turnOffOption.removeClass("hidden")),"group_invite"===t.type&&(this.actionContainer=i.one(".action-container"),this.acceptButton=this.actionContainer.one(".button.accept"),this.declineButton=this.actionContainer.one(".button.decline"),this.registerEventHandler(this.acceptButton.on("click",this.handleGroupInviteAcceptClick.bind(this))),this.registerEventHandler(this.declineButton.on("click",this.handleGroupInviteDeclineClick.bind(this)))),this},getTaggedPeople:function(t){for(var e=[],i=0;i<t.length;i++){for(var n=t[i],o={id:n.personTagged.id,name:n.personTagged.displayname,url:n.personTagged.profileURL},a=!1,s=0;s<e.length;s++)if(e[s].id===o.id){a=!0;break}a||e.push(o)}return e},getEventOwners:function(t){for(var e=[],i=0;i<t.length;i++){for(var n=t[i],o={id:n.owner.id,name:n.owner.displayname,url:n.owner.profileURL},a=!1,s=0;s<e.length;s++)if(e[s].id===o.id){a=!0;break}a||e.push(o)}return e},getEventGroups:function(t){for(var e=[],i=0;i<t.length;i++){for(var n=t[i],o={id:n.group.id,title:n.group.title,url:n.group.url,iconUrl:n.group.bestIconURL},a=!1,s=0;s<e.length;s++)if(e[s].id===o.id){a=!0;break}a||e.push(o)}return e},handleContextArrowClick:function(t){this.toggleContextMenu()},toggleContextMenu:function(){this.listItem.hasClass("expanded")?this.listItem.removeClass("expanded"):(this.notificationsList.all(".notification-list-item.expanded").each(function(t){t.removeClass("expanded")}),this.listItem.addClass("expanded"),this.ctxMenu.removeClass("fast-close"))},handleMuteObjectClick:function(t,e,i){var n=this,o={};o.object_type=t.type,o.object_id=t.id,o.event_type=t.eventType,o.mute_after=t.latestTimestamp,e?(n.turnOffOption.addClass("disabled"),this.notifModel.remoteUpdateMutedObjects(o,this.appContext).then(function(t){n.turnOffOption.addClass("hidden"),n.turnOffOption.removeClass("disabled"),n.turnOnOption.removeClass("hidden"),n.notification.addClass("muted"),n.toggleContextMenu()},function(t){n.turnOffOption.removeClass("disabled")})):(n.turnOnOption.addClass("disabled"),this.notifModel.remoteUpdateUnmutedObjects(o,this.appContext).then(function(t){n.turnOnOption.addClass("hidden"),n.turnOnOption.removeClass("disabled"),n.turnOffOption.removeClass("hidden"),n.notification.removeClass("muted"),n.listItem.hasClass("expanded")&&n.toggleContextMenu()},function(t){n.turnOnOption.removeClass("disabled")})),n.ctxMenu.addClass("fast-close")},handleGroupInviteAcceptClick:function(t){var e=this;return this.actionContainer.addClass("loading"),this.invitationsModelRegistry.remote.acceptInvitation({groupID:e.subevents[0].group.id,userID:e.appContext.getViewer().nsid,photoID:e.object.id},e.appContext).then(function(t){return e.actionContainer.removeClass("loading"),e.actionContainer.addClass("accepted"),e.removeNotification(),t}).catch(function(t){throw i.error("Error accepting invite to group",{err:t}),e.actionContainer.removeClass("loading"),t})},handleGroupInviteDeclineClick:function(t){var e=this;return this.actionContainer.addClass("loading"),this.invitationsModelRegistry.remote.declineInvitation({groupID:e.subevents[0].group.id,userID:e.appContext.getViewer().nsid,photoID:e.object.id},e.appContext).then(function(t){return e.actionContainer.removeClass("loading"),e.actionContainer.addClass("declined"),e.removeNotification(),t}).catch(function(t){throw i.error("Error declining invite to group",{err:t}),e.actionContainer.removeClass("loading"),t})},removeNotification:function(){var t=this,e=this.notifModel.getValue("notifications").getList();e=e.filter(function(e){return t.notifModel.getValue("notifications").remove({id:e.id}),t.notifId!==e.id}),this.notifModel.getValue("notifications").concat(e)}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-notifications","hermes-template-notification-photo-comment","hermes-template-notification-group-invite","hermes-template-notification-added-to-gallery","hermes-template-notification-photo-fave","hermes-template-notification-photo-shell","hermes-template-notification-person-follow","hermes-template-notification-tag","hermes-template-notification-person","hermes-template-notification-mention","hermes-template-notification-photo-group-invite","hermes-template-notification-photo-extra-info","hermes-template-notification-photo-note","hermes-template-notification-photo-share","hermes-template-notification-group-discussion-reply","hermes-template-notification-gallery-comment","hermes-template-notification-friend-join","hermes-template-notification-group-topic-new","hermes-template-notification-flickrmail","hermes-template-notification-testimonial","hermes-template-notification-context-menu","hermes-template-notification"],langBundles:["common","relative-dates","notifications"]});YUI.add("hermes-lang-relative-dates_fr-fr",function(_,T){_.Intl.add("hermes/relative-dates","fr-FR",{SECOND_LONG:["1 seconde"],SECONDS_LONG:["${time}"," secondes"],MINUTE_LONG:["1 min"],MINUTES_LONG:["${time}"," min"],HOUR_LONG:["1 heure"],HOURS_LONG:["${time}"," heures"],DAY_LONG:["1 jour"],DAYS_LONG:["${time}"," jours"],MONTH_LONG:["1 mois"],MONTHS_LONG:["${time}"," mois"],YEAR_LONG:["1 an"],YEARS_LONG:["${time}"," années"],SECOND_SHORT:["1 s"],SECONDS_SHORT:["${time}"," s"],MINUTE_SHORT:["1 m"],MINUTES_SHORT:["${time}"," m"],HOUR_SHORT:["1 h"],HOURS_SHORT:["${time}"," h"],DAY_SHORT:["1 j"],DAYS_SHORT:["${time}"," j"],MONTH_SHORT:["1 mo"],MONTHS_SHORT:["${time}"," mo"],YEAR_SHORT:["1 a"],YEARS_SHORT:["${time}"," a"],SECOND_LONG_FUTURE:["en 1 seconde"],SECONDS_LONG_FUTURE:["en ","${time}"," secondes"],MINUTE_LONG_FUTURE:["en 1 minute"],MINUTES_LONG_FUTURE:["en ","${time}"," minutes"],HOUR_LONG_FUTURE:["en 1 heure"],HOURS_LONG_FUTURE:["en ","${time}"," heures"],DAY_LONG_FUTURE:["en 1 jour"],DAYS_LONG_FUTURE:["en ","${time}"," jours"],MONTH_LONG_FUTURE:["en 1 mois"],MONTHS_LONG_FUTURE:["en ","${time}"," mois"],YEAR_LONG_FUTURE:["en 1 année"],YEARS_LONG_FUTURE:["en ","${time}"," années"],FUTURE_SHORT_FUTURE:["en ","${time}"],SECOND_SHORT_FUTURE:["en 1 s"],SECONDS_SHORT_FUTURE:["en ","${time}"," s"],MINUTE_SHORT_FUTURE:["en 1 min"],MINUTES_SHORT_FUTURE:["en ","${time}"," min"],HOUR_SHORT_FUTURE:["en 1 h"],HOURS_SHORT_FUTURE:["en ","${time}"," h"],DAY_SHORT_FUTURE:["en 1 j"],DAYS_SHORT_FUTURE:["en ","${time}"," j"],MONTH_SHORT_FUTURE:["en 1 m"],MONTHS_SHORT_FUTURE:["en ","${time}"," m"],YEAR_SHORT_FUTURE:["en 1 a"],YEARS_SHORT_FUTURE:["en ","${time}"," a"],SECOND_LONG_PAST:["Il y a 1 seconde"],SECONDS_LONG_PAST:["Il y a ","${time}"," secondes"],MINUTE_LONG_PAST:["Il y a 1 minute"],MINUTES_LONG_PAST:["Il y a ","${time}"," minutes"],HOUR_LONG_PAST:["Il y a 1 heure"],HOURS_LONG_PAST:["Il y a ","${time}"," heures"],DAY_LONG_PAST:["Il y a 1 jour"],DAYS_LONG_PAST:["Il y a ","${time}"," jours"],MONTH_LONG_PAST:["Il y a 1 mois"],MONTHS_LONG_PAST:["Il y a ","${time}"," mois"],YEAR_LONG_PAST:["Il y a 1 an"],YEARS_LONG_PAST:["Il y a ","${time}"," ans"],SECOND_SHORT_PAST:["Il y a 1 s"],SECONDS_SHORT_PAST:["Il y a ","${time}"," s"],MINUTE_SHORT_PAST:["Il y a 1 min"],MINUTES_SHORT_PAST:["Il y a ","${time}"," min"],HOUR_SHORT_PAST:["Il y a 1 h"],HOURS_SHORT_PAST:["Il y a ","${time}"," h"],DAY_SHORT_PAST:["Il y a 1 j"],DAYS_SHORT_PAST:["Il y a ","${time}"," j"],MONTH_SHORT_PAST:["Il y a 1 m"],MONTHS_SHORT_PAST:["Il y a","${time}"," m"],YEAR_SHORT_PAST:["Il y a 1 a"],YEARS_SHORT_PAST:["Il y a ","${time}"," a"],NO_DATE:["-"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-notifications_fr-fr",function(e,o){e.Intl.add("hermes/notifications","fr-FR",{NOTIF_PHOTO_FAVE:["<a href='","${ownerUrl}","'>","${owner}","</a> a ajouté votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}," aux favoris."],NOTIF_PHOTO_FAVE_MULTI:[{type:"plural",valueName:"count",options:{one:["<a href='","${ownerUrl}","'>","${owner}","</a> et <a href='","${secondUrl}","'>","${secondOwner}","</a> ont ajouté votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}],other:["<a href='","${ownerUrl}","'>","${owner}","</a> et ","${count}"," autres personnes ont ajouté votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}]}}," aux favoris."],NOTIF_PERSON_FOLLOW:["<a href='","${ownerUrl}","'>","${owner}","</a> vous suit maintenant"],NOTIF_PHOTO_COMMENT_YOURS:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajouté un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_PHOTO_COMMENT_YOURS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> ont ajouté un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> et ","${count}"," autres personnes ont ajouté un commentaire sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}]}},"."],NOTIF_PHOTO_COMMENT_OTHER:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajouté un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_PHOTO_COMMENT_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a> ont ajouté un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}],other:['<a href="',"${firstPersonUrl}",'">',"${firstPersonName}","</a> et ","${count}"," autres personnes ont ajouté un commentaire sur la ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}]}},' de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_MENTION:['<a href="',"${personUrl}",'">',"${personName}","</a> vous a mentionné dans une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_MENTION_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," vous ont mentionné dans une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_PHOTO_GROUP_INVITE:["<a href='","${ownerUrl}","'>","${owner}","</a> vous a invité à ajouter votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}," au groupe <a href='","${groupUrl}","'>","${groupName}","</a>."],NOTIF_PHOTO_GROUP_INVITE_MULTI:["Vous avez été invité à ajouter votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}," ",{type:"plural",valueName:"count",options:{one:["aux groupes <a href='","${groupUrl}","'>","${groupName}","</a> et <a href='","${secondGroupUrl}","'>","${secondGroupName}","</a>"],other:["au groupe <a href='","${groupUrl}","'>","${groupName}","</a> et à ","${count}"," autres groupes"]}},"."],NOTIF_GROUP_USER_INVITE:['Vous avez été invité à rejoindre le groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_TAGS:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajouté un tag sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_TAGS_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont ajouté un tag sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_GALLERY:["Votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},' a été ajoutée à l’expo <a href="',"${galleryUrl}",'">',"${galleryName}","</a>."],NOTIF_GALLERY_MULTI:["Votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}," a été ajoutée ",{type:"plural",valueName:"count",options:{one:['aux expos <a href="',"${galleryUrl}",'">',"${galleryName}",'</a> et <a href="',"${secondGalleryUrl}",'">',"${secondGalleryName}","</a>"],other:['à l’expo <a href="',"${galleryUrl}",'">',"${galleryName}","</a> et à ","${count}"," autres expos"]}},"."],NOTIF_ADD_PERSON:['<a href="',"${personUrl}",'">',"${personName}","</a> a tagué des personnes sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_ADD_PEOPLE:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont tagué des personnes sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_ADD_ME:['<a href="',"${ownerUrl}",'">',"${ownerName}","</a> vous a tagué sur une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_NOTES:['<a href="',"${personUrl}",'">',"${personName}","</a> a ajouté une note sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_NOTES_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}}," ont ajouté une note sur votre ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}},"."],NOTIF_NOTES_OTHER:['<a href="',"${personUrl}",'">',"${personName}",'</a> a laissé un commentaire sur une photo de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],NOTIF_NOTES_OTHER_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> ont laissé des commentaires sur la photo de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}",' autres personnes ont laissé des commentaires sur la photo de <a href="',"${ownerUrl}",'">',"${ownerName}","</a>."]}}],NOTIF_VIEW_RECENT_ACTIVITY:["Afficher l’activité récente"],NOTIFICATIONS:["Notifications"],NOTIF_SHARE:['<a href="',"${personUrl}",'">',"${personName}","</a> a partagé une ",{type:"select",valueName:"mediaType",options:{photo:["photo"],video:["vidéo"],other:["photo"]}}," avec vous."],FLICKR_MAIL_COUNT_PAREN:["(","${count}",")"],FLICKR_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> a répondu à la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],FLICKR_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}},' ont répondu à la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY:['<a href="',"${personUrl}",'">',"${personName}",'</a> a répondu à la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_GROUP_DISCUSSION_REPLY_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}","</a>"],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}"," autres personnes"]}},' ont répondu à la discussion <a href="',"${replyUrl}",'">',"${objectTitle}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_ONBOARDING_TITLE:["NOUVEAU — Centre de notification"],NOTIF_ONBOARDING_DESCRIPTION:['Vous trouverez ici les notifications de votre activité récente sur Flickr et pourrez accéder facilement à <a href="/mail">FlickrMail</a>. Nous avons tout fait pour vous faire plaisir !'],NOTIF_GALLERY_COMMENT:['<a href="',"${personUrl}",'">',"${personName}",'</a> a ajouté un commentaire sur votre expo <a href="',"${objectUrl}",'">',"${objectName}","</a>."],NOTIF_GALLERY_COMMENT_MULTI:[{type:"plural",valueName:"count",options:{one:['<a href="',"${personUrl}",'">',"${personName}",'</a> et <a href="',"${secondPersonUrl}",'">',"${secondPersonName}",'</a> ont commenté votre expo <a href="',"${objectUrl}",'">',"${objectName}","</a>."],other:['<a href="',"${personUrl}",'">',"${personName}","</a> et ","${count}",' autres personnes ont commenté votre expo <a href="',"${objectUrl}",'">',"${objectName}","</a>."]}}],NOTIF_FRIEND_JOIN:['Votre ami <a href="',"${personUrl}",'">',"${personName}","</a> a rejoint Flickr !"],NOTIF_NEW_GROUP_DISCUSSION:['<a href="',"${personUrl}",'">',"${personName}",'</a> a créé la discussion <a href="',"${discussionUrl}",'">',"${discussionName}",'</a> du groupe <a href="',"${groupUrl}",'">',"${groupName}","</a>."],NOTIF_FLICKRMAIL:["<a href='","${personUrl}","'>","${personName}","</a> vous a envoyé un message : <a href='","${mailUrl}","'>« ","${mailTitle}"," »</a>"],NOTIF_TURN_OFF_OBJECT:["Désactiver les notifications pour cet article"],NOTIF_TURN_ON_OBJECT:["Activer les notifications pour cet article"],NOTIF_HIDE_THIS:["Masquer cette notification"],NOTIF_NOTHING_HERE:["Vos nouvelles notifications apparaîtront ici."],NOTIF_OFF_FOR_POST:["Les notifications pour cet article sont désactivées."],NOTIF_UNDO:["Annuler"],NOTIF_TESTIMONIAL:['<a href="',"${personUrl}",'">',"${personName}",'</a> a laissé un <a href="',"${testimonialUrl}",'">mot</a> à votre sujet.'],GROUP_INVITE_ACCEPT:["Accepter l'invitation"],GROUP_INVITE_NO_THANKS:["Non, merci"],GROUP_INVITE_ACCEPTED:["Invitation acceptée"],GROUP_INVITE_DECLINED:["Invitation refusée"],FLICKRMAIL_HAS_MOVED:['FlickrMail est désormais disponible depuis le menu des paramètres. <a class="open-account-droparound-button" role="button" >Ouvrir le menu</a>']})},"@VERSION@",{requires:["intl"]});YUI.add("flickr-galleries-comments-addComment-creator",function(e,t){"use strict";e.namespace("ModelCreators")["flickr-galleries-comments-addComment"]={run:function(n,r){var o=this;return e.Promise.all([r.callAPI("flickr.galleries.comments.addComment",this._processParams(n)),r.getModelRegistry("person-models"),r.getModelRegistry("gallery-comment-models"),r.getModel("gallery-info-models",n.galleryId)]).then(function(e){return o._processResponse(e,n,r)},e.FetcherErrorLogger(t))},_processParams:function(e){return{gallery_id:e.galleryId,comment_text:e.commentText,user_id:e.galleryOwnerId,extras:"full_response, expand_bbml"}},_processResponse:function(e,t,n){var r,o,m,a=e[0],l=(e[1],e[2]),s=e[3],c=a.comment;return c.secureComment&&(o="string"==typeof c.secureComment?c.secureComment:c.secureComment.content),o||(o=c.content||c.comment),c.rawComment&&(m="string"==typeof c.rawComment?c.rawComment:c.rawComment.content),m||(m=c.content||c.comment),n.getModel("person-models",t.authorId).then(function(e){return r=l.addOrUpdate({id:c.commentId,galleryId:c.galleryId,galleryOwnerId:c.galleryOwnerId,author:e,authorUsername:c.authorname,authorId:c.author,date:c.dateCreate,permalink:c.permalink,content:c.content,contentSecure:o,contentRaw:m}),s.getValue("comments").unshift(r),s.getValue("comments").totalItems++,s.setValue("commentCount",s.getValue("commentCount")+1),r})}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("flickr-galleries-comments-deleteComment-deletor",function(e,o){"use strict";e.namespace("ModelDeletors")["flickr-galleries-comments-deleteComment"]={run:function(t,r){var l=this;return e.Promise.all([r.callAPI("flickr.galleries.comments.deleteComment",this._processParams(t)),r.getModel("gallery-info-models",t.galleryId)]).then(function(e){l._processResponse(e,t,r)},e.FetcherErrorLogger(o))},_processParams:function(e){return{comment_id:e.commentId,gallery_id:e.galleryId,owner_id:e.ownerId}},_processResponse:function(e,o,t){e[0];var r=e[1];r.getValue("comments").removeFromList(o.commentId),r.getValue("comments").totalItems--,r.setValue("commentCount",r.getValue("commentCount")-1)}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});